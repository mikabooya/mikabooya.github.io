<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>mika pham â€” portfolio</title>

    <!-- spline viewer -->
    <script
      type="module"
      src="https://unpkg.com/@splinetool/viewer/build/spline-viewer.js"
    ></script>

    <style>
      * {
        cursor: none !important;
      }

      :root {
        --pink: rgb(246, 68, 184);
        --lavender: rgb(169, 132, 220);
        --gold: rgb(252, 215, 131);

        /* Light mode colors */
        --bg-light: #fffdf5;
        --text-light: #2b1e2e;
        --overlay-light-1: rgba(255, 200, 240, 0.15);
        --overlay-light-2: rgba(255, 253, 245, 0.3);

        /* Dark mode colors */
        --bg-dark: #1a1a1a;
        --text-dark: #f5f5f5;
        --overlay-dark-1: rgba(246, 68, 184, 0.12);
        --overlay-dark-2: rgba(169, 132, 220, 0.12);
        --overlay-dark-3: rgba(252, 215, 131, 0.08);
      }

      html,
      body {
        height: 100%;
        margin: 0;
        overflow: hidden;
        font-family: "Inter", sans-serif;
        transition: background 0.4s ease;
      }

      body {
        background: var(--bg-light);
        animation: fadeIn 0.5s ease-out;
      }

      body.dark-mode {
        background: var(--bg-dark);
      }

      /* Page transition animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
      }

      body.page-exit {
        animation: fadeOut 0.4s ease-in-out forwards;
      }

      /* Transition overlay */
      .transition-overlay {
        position: fixed;
        inset: 0;
        background: var(--bg-light);
        z-index: 9999;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.4s ease-in-out;
      }

      body.dark-mode .transition-overlay {
        background: var(--bg-dark);
      }

      body.page-exit .transition-overlay {
        opacity: 1;
        pointer-events: all;
      }

      spline-viewer {
        position: fixed;
        inset: 0;
        display: block;
        width: 100vw;
        height: 100vh;
        z-index: 0;
      }

      /* Light mode overlay */
      .overlay {
        position: fixed;
        inset: 0;
        pointer-events: none;
        background: radial-gradient(
          circle at 30% 30%,
          var(--overlay-light-1),
          var(--overlay-light-2)
        );
        z-index: 1;
        transition: opacity 0.4s ease;
      }

      /* Dark mode overlay with dynamic gradient */
      body.dark-mode .overlay {
        background: radial-gradient(
            1200px 800px at 15% 20%,
            var(--overlay-dark-1),
            transparent 60%
          ),
          radial-gradient(
            1000px 700px at 85% 75%,
            var(--overlay-dark-2),
            transparent 60%
          ),
          radial-gradient(
            900px 600px at 50% 90%,
            var(--overlay-dark-3),
            transparent 70%
          );
        background-size: 300% 300%;
        animation: gradientFlow 15s ease-in-out infinite alternate;
      }

      @keyframes gradientFlow {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* Footer title */
      .title {
        position: fixed;
        bottom: 2rem;
        left: 2rem;
        font-weight: 600;
        font-size: 1.2rem;
        background: linear-gradient(
          90deg,
          var(--pink),
          var(--gold),
          var(--lavender),
          var(--pink)
        );
        background-size: 300% 300%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: shimmer 5s ease infinite;
        z-index: 2;
        transition: opacity 0.3s ease;
      }

      @keyframes shimmer {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* Theme toggle button */
      .theme-toggle {
        position: fixed;
        top: 2rem;
        right: 2rem;
        width: 56px;
        height: 56px;
        border-radius: 50%;
        border: none;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        z-index: 3;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      body.dark-mode .theme-toggle {
        background: rgba(255, 255, 255, 0.1);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      }

      .theme-toggle:hover {
        transform: scale(1.02);
        box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
      }

      body.dark-mode .theme-toggle:hover {
        box-shadow: 0 6px 25px rgba(246, 68, 184, 0.3);
      }

      .theme-toggle:active {
        transform: scale(0.98);
      }

      /* Toggle icon */
      .toggle-icon {
        width: 24px;
        height: 24px;
        position: relative;
        transition: transform 0.3s ease;
      }

      /* Sun icon (shown in dark mode) */
      .sun-icon {
        display: none;
      }

      body.dark-mode .sun-icon {
        display: block;
      }

      body.dark-mode .moon-icon {
        display: none;
      }

      /* Icon styles */
      .toggle-icon svg {
        width: 100%;
        height: 100%;
        fill: var(--text-light);
      }

      body.dark-mode .toggle-icon svg {
        fill: var(--text-dark);
      }

      /* Custom cursor */
      .cursor {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--pink);
        position: fixed;
        pointer-events: none;
        z-index: 10000;
        transform: translate(-50%, -50%);
        transition: transform 0.15s ease, width 0.2s ease, height 0.2s ease;
        box-shadow: 0 0 15px rgba(246, 68, 184, 0.5);
      }

      .cursor.click {
        transform: translate(-50%, -50%) scale(0.8);
      }
    </style>
  </head>

  <body>
    <!-- Transition overlay -->
    <div class="transition-overlay"></div>

    <!-- Theme toggle button -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
      <div class="toggle-icon">
        <!-- Moon icon for light mode -->
        <svg
          class="moon-icon"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
        >
          <path
            d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"
          />
        </svg>
        <!-- Sun icon for dark mode -->
        <svg
          class="sun-icon"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
        >
          <path
            d="M12,6a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V5A1,1,0,0,0,12,6ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-1.41-1.42A1,1,0,0,0,4.22,5.64ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm.64,5.05a1,1,0,0,0-1.41,1.41l1.41,1.42a1,1,0,0,0,.71.29,1,1,0,0,0,.7-.29,1,1,0,0,0,0-1.41ZM12,18a1,1,0,0,0-1,1v2a1,1,0,0,0,2,0V19A1,1,0,0,0,12,18Zm5.66-.36a1,1,0,0,0-1.41,1.41l1.41,1.42a1,1,0,0,0,.71.29,1,1,0,0,0,.7-.29,1,1,0,0,0,0-1.41ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-2.64-3.95a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29l1.41-1.42a1,1,0,1,0-1.41-1.41l-1.41,1.42A1,1,0,0,0,18.36,7.05ZM12,8a4,4,0,1,0,4,4A4,4,0,0,0,12,8Zm0,6a2,2,0,1,1,2-2A2,2,0,0,1,12,14Z"
          />
        </svg>
      </div>
    </button>

    <!-- spline scene -->
    <spline-viewer
      url="https://prod.spline.design/0OgmrUg00xI72hXH/scene.splinecode"
      events-target="global"
    ></spline-viewer>

    <!-- overlay with gradient -->
    <div class="overlay"></div>

    <!-- Custom cursor -->
    <div class="cursor"></div>

    <script>
      const themeToggle = document.getElementById("themeToggle");
      const body = document.body;

      // Check for saved theme preference or default to light mode
      const currentTheme = localStorage.getItem("theme") || "light";
      if (currentTheme === "dark") {
        body.classList.add("dark-mode");
      }

      // Toggle theme
      themeToggle.addEventListener("click", () => {
        body.classList.toggle("dark-mode");

        // Save preference
        const theme = body.classList.contains("dark-mode") ? "dark" : "light";
        localStorage.setItem("theme", theme);
      });

      // Custom cursor
      const cursor = document.querySelector(".cursor");
      window.addEventListener("mousemove", (e) => {
        cursor.style.left = e.clientX + "px";
        cursor.style.top = e.clientY + "px";
      });

      // Cursor click effect
      window.addEventListener("mousedown", () => {
        cursor.classList.add("click");
      });

      window.addEventListener("mouseup", () => {
        cursor.classList.remove("click");
      });

      // Smooth page transitions - simple approach
      let transitionStarted = false;

      // Override window.open to prevent new tabs from Spline
      const originalWindowOpen = window.open;
      window.open = function (url, target, features) {
        // If it's an HTML file (internal navigation), keep it in same tab
        if (url && url.includes(".html")) {
          transitionStarted = true;
          document.body.classList.add("page-exit");
          setTimeout(() => {
            window.location.href = url;
          }, 400);
          return null;
        }
        // For external links, use original behavior
        return originalWindowOpen.call(window, url, target, features);
      };

      // Start transition on ANY click
      document.addEventListener(
        "click",
        () => {
          if (!transitionStarted) {
            transitionStarted = true;
            document.body.classList.add("page-exit");

            // If no navigation happens, remove the class
            setTimeout(() => {
              if (window.location.href === document.URL) {
                document.body.classList.remove("page-exit");
                transitionStarted = false;
              }
            }, 500);
          }
        },
        true
      );

      document.addEventListener("DOMContentLoaded", () => {
        // Add smooth transition to regular HTML links
        const links = document.querySelectorAll('a[href$=".html"]');
        links.forEach((link) => {
          link.addEventListener("click", (e) => {
            const href = link.getAttribute("href");
            if (link.target === "_blank" || !href || href.startsWith("http")) {
              return;
            }
            e.preventDefault();

            transitionStarted = true;
            document.body.classList.add("page-exit");
            setTimeout(() => {
              window.location.href = href;
            }, 400);
          });
        });
      });
    </script>
  </body>
</html>
